const JOS = new class jos{ default_once = !1; default_animation = "fade"; default_timingFunction = "ease-in-out"; default_threshold = 0; default_duration = .4; default_delay = 0; default_intersectionRatio = 0; default_rootMargin = "-10% 0% -40% 0%"; default_passive = !0; debug = !1; disable = !1; version = "0.6"; author = "Jesvi Jonathan"; github = "https://github.com/jesvijonathan/JOS-Animation-Library"; jos_stylesheet = document.getElementById("jos-stylesheet").sheet; boxes = document.querySelectorAll(".jos"); constructor() { } debugLogger(t = 0) { } callbackRouter = (t, s) => { if (1 == this.disable) return; let e = t[0], a = e.target; if (e.intersectionRatio > this.default_intersectionRatio) { if (null != a.dataset.jos_counter) { let t = parseInt(a.dataset.jos_counter); t++, a.dataset.jos_counter = t } a.dataset.jos_animation && (a.classList.remove("jos-" + a.dataset.jos_animation), null != a.dataset.jos_invoke && window[a.dataset.jos_invoke](a), null == a.dataset.jos_once && "false" == a.dataset.jos_once || ("true" == a.dataset.jos_once || a.dataset.jos_counter >= a.dataset.jos_once) && s.unobserve(a)) } else a.classList.add("jos-" + a.dataset.jos_animation), null != a.dataset.jos_invoke_out && window[a.dataset.jos_invoke_out](a) }; animationInit() { this.boxes.forEach((t => { let s = t.dataset.jos_once, e = (t.dataset.jos_count, t.dataset.jos_animation), a = t.dataset.jos_timingFunction, i = t.dataset.jos_duration, o = t.dataset.jos_delay; null != s && "false" != s && ("true" == s ? t.setAttribute("data-jos_once", "1") : s.match(/^[0-9]+$/) ? t.setAttribute("data-jos_once", s) : t.setAttribute("data-jos_once", "false")), null != e ? t.setAttribute("data-jos_animation", e) : (t.setAttribute("data-jos_animation", this.default_animation), e = this.default_animation), null != a && t.setAttribute("data-jos_timingFunction", a), null != i && t.setAttribute("data-jos_duration", i), null != o && t.setAttribute("data-jos_delay", o), t.setAttribute("data-jos_counter", "0"), t.classList.add("jos-" + e), this.observer = new IntersectionObserver(this.callbackRouter, { rootMargin: this.default_rootMargin, threshold: this.default_threshold, passive: this.default_passive }), this.observer.observe(t) })) } init(t={}) { t && (null != t.once && (this.default_once = t.once), null != t.animation && (this.default_animation = t.animation), null != t.timingFunction && (this.default_timingFunction = t.timingFunction), null != t.threshold && (this.default_threshold = t.threshold), null != t.intersectionRatio ? this.default_intersectionRatio = 1 == t.intersectionRatio ? .99 : t.intersectionRatio : this.default_intersectionRatio = 1 == this.default_threshold ? .99 : this.default_threshold, null != t.duration && (this.default_duration = t.duration), null != t.delay && (this.default_delay = t.delay), null != t.rootMargin ? this.default_rootMargin = t.rootMargin : null == t.rootMarginTop && null == t.rootMarginBottom || (this.default_rootMargin = (null != t.rootMarginTop ? t.rootMarginTop : "-10%") + " 0% " + (null != t.rootMarginBottom ? t.rootMarginBottom : "-40%") + " 0%"), 1 == t.debugMode && this.debugLogger()), this.jos_stylesheet.insertRule(".jos {transition: " + this.default_duration + "s " + this.default_timingFunction + " " + this.default_delay + "s !important;}"), 1 == this.disable ? this.rst() : this.animationInit() } rst = (t = 0) => { this.boxes.forEach((s => { 0 == t ? s.classList.remove("jos-" + s.dataset.jos_animation) : s.classList.add("jos-" + s.dataset.jos_animation), this.observer.unobserve(s) })), this.jos_stylesheet.insertRule(".jos {transition: " + this.default_duration + "s " + this.default_timingFunction + ";}") }; start() { this.disable = !1 } reset(t = 0) { return 0 == t ? (this.disable = !1, this.rst(1)) : -1 == t ? (this.rst(0), this.animationInit()) : this.rst(0), this.disable = !1, !0 } stop(t = 0) { return -1 == t ? (this.disable = !0, this.rst(1)) : 1 == t ? this.disable = !0 : (this.disable = !0, this.rst(0)), this.observer.disconnect(), !0 } destroy() { return this.rst(), this.boxes.forEach((t => { t.classList.remove("jos"), t.classList.remove("jos-" + t.dataset.jos_animation) })), null } };
// By Jesvi Jonathan